<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ç»™åˆ˜å†°è¿œçš„ç”Ÿæ—¥ç¥ç¦ â¤ï¸</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
      overflow: hidden;
      font-family: "Helvetica Neue", "PingFang SC", "Microsoft YaHei", sans-serif;
    }

    .slider {
      display: flex;
      flex-direction: column;
      height: 100vh;
      scroll-snap-type: y mandatory;
      overflow-y: scroll;
      scroll-behavior: smooth;
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
    .slider::-webkit-scrollbar { display: none; }

    .page {
      flex: 1 0 100%;
      scroll-snap-align: start;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 20px;
      position: relative;
    }

    /* ========== é¦–é¡µ & æ•…äº‹é¡µç»Ÿä¸€èƒŒæ™¯ ========== */
    .page-1,
    .page-2,
    .page-3,
    .page-4,
	.page-5{
      background: linear-gradient(135deg, #ff9a9e, #fad0c4);
      color: white;
    }

    .envelope {
      width: 200px;
      height: 140px;
      background: #fff;
      border-radius: 8px;
      position: relative;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }

    .envelope::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 70px;
      background: #f8f9fa;
      clip-path: polygon(0 0, 100% 0, 50% 100%);
    }

    .hint {
      margin-top: 40px;
      font-size: 1.2em;
      opacity: 0.9;
      animation: bounce 2s infinite;
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-10px); }
      60% { transform: translateY(-5px); }
    }

    .story-image {
      width: 80%;
      max-width: 300px;
      height: auto;
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
      margin-bottom: 25px;
      border: 3px solid rgba(255,255,255,0.3);
    }

    .story-text {
      background: rgba(255, 255, 255, 0.85);
      padding: 20px;
      border-radius: 16px;
      font-size: 1.1em;
      line-height: 1.6;
      max-width: 600px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      color: #5a4a42;
    }

    .letter-page {
      background: #fdf6ec;
      color: #5a4a42;
    }

    .letter {
	  background: white;
	  padding: 30px;
	  border-radius: 20px;
	  font-size: 1em; /* ğŸ‘ˆ å­—ä½“å˜å° */
	  line-height: 1.7;
	  max-width: 600px;
	  box-shadow: 0 6px 20px rgba(0,0,0,0.1);
	  position: relative;
	  text-align: center; /* ğŸ‘ˆ æ–‡å­—å±…ä¸­å¯¹é½ */
	}

	.letter::after {
	  content: "ğŸ’Œ";
	  position: absolute;
	  bottom: -30px;
	  left: 50%; /* ğŸ‘ˆ å±…ä¸­å®šä½ */
	  transform: translateX(-50%); /* ğŸ‘ˆ æ°´å¹³å±…ä¸­ */
	  font-size: 24px;
	}

    .record-page {
      background: linear-gradient(135deg, #a18cd1, #fbc2eb);
      color: white;
    }

    /* ========== å”±ç‰‡å®¹å™¨ ========== */
    .record-container {
      margin: 30px 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
    }

    /* ========== é»‘èƒ¶å”±ç‰‡ ========== */
    .record {
      width: 180px;
      height: 180px;
      background: radial-gradient(circle, #111 0%, #222 60%, #000 100%);
      border-radius: 50%;
      position: relative;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
      animation: rotateRecord 20s linear infinite;
      animation-play-state: paused; /* é»˜è®¤ä¸è½¬ */
    }

    .record.playing {
      animation-play-state: running;
    }

    /* å”±ç‰‡ä¸­å¿ƒåœ†ç¯ */
    .record::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 36px;
      height: 36px;
      background: #d4af37; /* é‡‘è‰² */
      border-radius: 50%;
      box-shadow: 0 0 8px rgba(212, 175, 55, 0.6);
      z-index: 2;
    }

    /* ä¸­å¿ƒå°å­” */
    .record::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 8px;
      height: 8px;
      background: #000;
      border-radius: 50%;
      z-index: 3;
    }

    /* å”±ç‰‡æ²Ÿçº¹æ•ˆæœ */
    .record-center {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 160px;
      height: 160px;
      border-radius: 50%;
      background: repeating-radial-gradient(
        circle at center,
        transparent 0%,
        transparent 1%,
        rgba(255, 255, 255, 0.05) 1.1%,
        rgba(255, 255, 255, 0.05) 2%
      );
      pointer-events: none;
    }

    /* å”±é’ˆ */
    .record-needle {
      position: absolute;
      top: -20px;
      left: 50%;
      transform: translateX(-50%) rotate(-25deg);
      width: 60px;
      height: 4px;
      background: #555;
      border-radius: 2px;
      transform-origin: right center;
      z-index: 10;
      opacity: 0.8;
    }

    .record-needle::after {
      content: '';
      position: absolute;
      right: -8px;
      top: 50%;
      transform: translateY(-50%);
      width: 16px;
      height: 16px;
      background: #d4af37;
      border-radius: 50%;
    }

    @keyframes rotateRecord {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    .play-btn {
      background: white;
      color: #e17055;
      border: none;
      padding: 12px 40px;
      font-size: 1.2em;
      border-radius: 50px;
      cursor: pointer;
      font-weight: bold;
      box-shadow: 0 6px 15px rgba(0,0,0,0.2);
      margin-top: 20px;
    }

    .play-btn:hover {
      transform: scale(1.05);
    }

    .footer-note {
      margin-top: 30px;
      font-size: 1.1em;
      opacity: 0.9;
    }
	
	/* ========== æœ€åä¸€é¡µï¼šæ¸©æŸ”å‘Šåˆ«ä¿¡ ========== */
	.final-note-page {
	  background: linear-gradient(135deg, #fff9f4, #ffebe6); /* æŸ”å’Œç±³ç²‰è‰²æ¸å˜ */
	  color: #5a4a42;
	  display: flex;
	  justify-content: center;
	  align-items: center;
	  padding: 30px;
	}

	.final-letter {
	  background: white;
	  padding: 35px;
	  border-radius: 20px;
	  font-size: 1.15em;
	  line-height: 1.8;
	  max-width: 600px;
	  box-shadow: 0 6px 25px rgba(0, 0, 0, 0.08);
	  position: relative;
	  text-align: left;
	  font-family: "Kaiti SC", "STKaiti", "KaiTi", "Times New Roman", serif; /* å¸¦ç‚¹æ‰‹å†™æ„Ÿ */
	}

	.final-letter::before {
	  content: "ğŸ’Œ";
	  position: absolute;
	  top: 20px;
	  right: 25px;
	  font-size: 20px;
	  opacity: 0.7;
	}

	.final-letter::after {
	  content: "";
	  position: absolute;
	  bottom: -15px;
	  left: 50%;
	  transform: translateX(-50%);
	  width: 40px;
	  height: 3px;
	  background: linear-gradient(to right, transparent, #ff9a9e, transparent);
	  border-radius: 2px;
	}

    /* ========== é¡µé¢è¿›åº¦æŒ‡ç¤ºå™¨ ========== */
    #progress-dots {
      position: fixed;
      right: 20px;
      top: 100px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      z-index: 100;
    }

    .dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.5);
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .dot.active {
      background: #ff6b6b;
      transform: scale(1.3);
    }

    /* ========== æ—¥è®°ç”»å»Š ========== */
    .photo-gallery {
      position: relative;
      width: 90%;
      max-width: 400px;
      aspect-ratio: 4 / 3;
      margin-bottom: 25px;
    }

    .gallery-track {
      position: relative;
      width: 100%;
      height: 100%;
      overflow: hidden;
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    }

    .gallery-img {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      opacity: 0;
      transition: opacity 0.4s ease;
    }

    .gallery-img.active {
      opacity: 1;
      z-index: 2;
    }

    .nav-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.7);
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      font-size: 20px;
      color: #555;
      cursor: pointer;
      z-index: 10;
      display: flex;
      align-items: center;
      justify-content: center;
      backdrop-filter: blur(2px);
    }
    .nav-btn.prev { left: 10px; }
    .nav-btn.next { right: 10px; }
    .nav-btn:hover {
      background: white;
      transform: translateY(-50%) scale(1.1);
    }

    .gallery-dots {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-top: 16px;
    }

    .gallery-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.4);
      cursor: pointer;
      transition: background 0.3s, transform 0.2s;
    }
    .gallery-dot.active {
      background: #ff6b6b;
      transform: scale(1.2);
    }

    @media (max-width: 600px) {
      .envelope { width: 160px; height: 110px; }
      .story-image { width: 90%; }
      #progress-dots {
        right: 15px;
        top: 80px;
        gap: 10px;
      }
      .dot {
        width: 8px;
        height: 8px;
      }
      .photo-gallery { height: 280px; }
      .nav-btn { width: 36px; height: 36px; font-size: 18px; }
    }
  </style>
</head>
<body>
  <!-- éŸ³é¢‘æ–‡ä»¶ -->
  <audio id="bgMusic" src="bg_music.mp3" loop></audio>
  <audio id="birthdaySong" src="birthday_song.mp3"></audio>

  <!-- é¡µé¢è¿›åº¦æŒ‡ç¤ºå™¨ -->
  <div id="progress-dots"></div>

  <!-- ä¸»æ»‘åŠ¨å®¹å™¨ -->
  <div class="slider" id="slider">
    <div class="page page-1">
      <div class="envelope"></div>
      <div class="hint">ğŸ‘‡ ä¸‹æ»‘æ‰“å¼€ä½ çš„ç”Ÿæ—¥ç¥ç¦</div>
    </div>
    <div class="page page-2">
      <img src="photo1.jpg" alt="1" class="story-image">
      <div class="story-text">
        åˆè§ä½ æ—¶ç¬‘çœ¼å¼¯å¼¯æœ›å‘æˆ‘çš„æ¨¡æ ·ï¼Œè‡³ä»Šè®©æˆ‘éš¾ä»¥å¿˜æ€€ï¼Œæˆ‘ä»å‰æ€»æƒ³å¾ªç€å›å¿†ï¼Œèµ°å›åˆé‡çš„ç¾å¥½ã€‚
      </div>
    </div>
    <div class="page page-3">
      <img src="photo2.jpg" alt="2" class="story-image">
      <div class="story-text">
        é‚£å¤©ä½ æ¥å­¦æ ¡æ‰¾æˆ‘ï¼Œéšä½ è€Œæ¥çš„æ˜¯å¿ƒæ„æ»¡æ»¡çš„é›¶é£Ÿï¼Œå†é…¸çš„å±±æ¥‚ä¹Ÿæ˜¯ç”œçš„å˜ï¼å¯æƒœå–”ï¼Œæ™šé¤æœ‰ç‚¹ç®€é™‹ï¼Œè¯¥æŠŠæˆ‘é¥­å¡å¡ç»™ä½ çš„ï¼Œå› ä¸ºè¿™ä»¶äº‹æˆ‘ä¸€ç›´è§‰å¾—å¯¹ä½ æœ‰äºæ¬ ã€‚
      </div>
    </div>
    <div class="page page-4">
      <img src="photo3.jpg" alt="3" class="story-image">
      <div class="story-text">
        ç¬¬ä¸€æ¬¡ä¸€èµ·çœ‹ç”µå½±ï¼Œæˆ‘åªæ•¢æ‚„æ‚„åœ¨ä½ çš„èº«åæ‹ä¸€å¼ èƒŒå½±ï¼Œè¿™å¤§æ¦‚æ˜¯æˆ‘è—å¾—æœ€æµ…ï¼Œå´åˆèˆä¸å¾—è¯´çš„å°ç§˜å¯†å§ï¼Ÿç”µå½±å‰§æƒ…æ—©å·²æ¨¡ç³Šä¸æ¸…ï¼Œå¯ä½ é è¿‘æˆ‘è€³è¾¹è¯´è¯æ—¶ï¼Œæ¸©çƒ­çš„æ°”æ¯è½»è½»æ‰‘åœ¨æˆ‘çš„è„¸é¢Šä¸Šï¼Œé‚£ç§æ„Ÿè§‰åœ¨æˆ‘çš„å¿ƒé‡Œè¡æ¼¾äº†å¾ˆä¹…ã€‚åŸæ¥å¿ƒåŠ¨ä¹‹åï¼Œæ˜¯æ¼«é•¿çš„é€‚åº”...
      </div>
    </div>
    <!-- æ—¥è®°é¡µ -->
    <div class="page page-5">
      <div class="photo-gallery" id="photoGallery">
        <div class="gallery-track" id="galleryTrack">
          <img src="diary1.jpg" class="gallery-img">
          <img src="diary2.jpg" class="gallery-img">
          <img src="diary3.jpg" class="gallery-img">
        </div>
        <button class="nav-btn prev" id="prevBtn">â€¹</button>
        <button class="nav-btn next" id="nextBtn">â€º</button>
        <div class="gallery-dots" id="galleryDots"></div>
      </div>
      <div class="story-text">
        åˆ†å¼€çš„è¿™æ®µæ—¶é—´é‡Œï¼Œé›¶é›¶ç¢ç¢çš„å†™äº†ä¸€äº›å°æ—¥è®°ï¼Œå¤§å¤šåœ¨éšæ‰‹çš„é‚£ä¸€é¡µçº¸ä¸Šï¼Œæˆ‘å·²ç»æ‰¾ä¸å…¨äº†.....ä¸è¿‡æˆ‘æ‰‹é‡Œçš„è¿™å‡ ç¯‡æ—¥è®°è¿˜ä¸å¤ªæƒ³ç»™ä½ çœ‹ï¼Œå†™äº†å¥½å¤šä¸¢äººçš„è¯è€¶ï¼Œç­‰æœ‰æœºä¼šå†ç»™ä½ å±•ç¤ºï¼Œå˜»å˜»~
      </div>
    </div>
    <!-- ç”Ÿæ—¥ä¿¡ -->
    <div class="page letter-page">
      <div class="letter">
        <p>äº²çˆ±çš„åˆ˜å†°è¿œï¼š</p>
        <p>ç”Ÿæ—¥å¿«ä¹ï¼ğŸ‚</p>
        <p>è°¢è°¢ä½ å‡ºç°åœ¨æˆ‘çš„ç”Ÿå‘½é‡Œã€‚</p>
        <p>æ„¿ä½ åœ¨æ–°çš„ä¸€å²ï¼Œå¥åº·å¹³å®‰ã€‚</p>
        <p>æ— è®ºè·ç¦»å¤šè¿œï¼Œæˆ‘éƒ½æƒ³é™ªä½ èµ°è¿‡æ¯ä¸€ä¸ªæ˜¥å¤ç§‹å†¬ã€‚</p>
        <p>æ°¸è¿œçˆ±ä½ çš„ç‹æ¶µæœˆ</p>
      </div>
    </div>
    <!-- å”±ç‰‡é¡µ -->
    <div class="page record-page">
      <h2>ğŸ æœ€åï¼Œè®¸ä¸ªæ„¿å§ï¼</h2>
      <div class="record-container">
        <div class="record" id="record">
          <div class="record-center"></div>
          <div class="record-needle"></div>
        </div>
      </div>
      <button class="play-btn" id="playButton">ğŸµ ç‚¹æˆ‘å¬ä½ çš„ç”Ÿæ—¥æ­Œ</button>
      <div class="footer-note">â¤ï¸ æ„¿ä½  å²å²å¹³å®‰</div>
    </div>
	    <!-- æœ€åçš„æ¸©æŸ”ç•™è¨€ -->
    <div class="page final-note-page">
      <div class="final-letter">
        å¾ˆé—æ†¾ï¼Œè¿™ä¸ªç½‘é¡µå‡†å¤‡çš„æœ‰äº›åŒ†å¿™äº†ï¼Œ<br>
		å¸Œæœ›ä½ ä¸è¦å«Œå¼ƒæˆ‘ç®€é™‹çš„åˆ¶ä½œï¼Œ<br>
		å’Œæ²¡æœ‰ä¼´å¥çš„ç”Ÿæ—¥æ­Œã€‚<br>
        è€Œä¸”æ­£å¥½ä»Šå¤©ä½ ä¼‘æ¯äº†ï¼Œæˆ‘å¥½åƒä¹Ÿæ²¡æœ‰å¾ˆé•¿çš„æ—¶é—´é™ªä½ å–”â€¦â€¦<br><br>
        ä¸è¿‡æˆ‘ä»¬å¾ˆå¿«å°±èƒ½è§é¢å•¦ï¼<br>
        æœŸå¾…å’Œä½ ä¸€èµ·åˆ›é€ æ›´å¤šç¾å¥½çš„å›å¿† â¤ï¸<br><br>
        çˆ±ä½ å–”~<br>
      </div>
    </div>
  </div>

  <script>
    // ========== éŸ³é¢‘æ§åˆ¶ ==========
    const bgMusic = document.getElementById('bgMusic');
    const birthdaySong = document.getElementById('birthdaySong');
    const playBtn = document.getElementById('playButton');
    const slider = document.getElementById('slider');

    let bgMusicStarted = false;

    function initBgMusic() {
      if (bgMusicStarted) return;
      bgMusicStarted = true;
      bgMusic.volume = 0;
      bgMusic.play().then(() => {
        fadeVolume(bgMusic, 0, 0.3, 2000);
      }).catch(e => console.log("èƒŒæ™¯éŸ³ä¹éœ€ç”¨æˆ·äº¤äº’æ‰èƒ½æ’­æ”¾"));
    }

    document.body.addEventListener('click', initBgMusic, { once: true });
    document.body.addEventListener('touchstart', initBgMusic, { once: true });

    function fadeVolume(audioEl, from, to, duration) {
      const steps = 100;
      const stepTime = duration / steps;
      const stepVol = (to - from) / steps;
      let currentVol = from;
      audioEl.volume = currentVol;

      const interval = setInterval(() => {
        currentVol += stepVol;
        audioEl.volume = Math.min(1, Math.max(0, currentVol));
        if ((stepVol > 0 && currentVol >= to) || (stepVol < 0 && currentVol <= to)) {
          audioEl.volume = to;
          clearInterval(interval);
        }
      }, stepTime);
    }

    playBtn.addEventListener('click', () => {
      if (!bgMusic.paused) {
        fadeVolume(bgMusic, bgMusic.volume, 0, 500);
        setTimeout(() => bgMusic.pause(), 500);
      }

      const record = document.getElementById('record');

      if (birthdaySong.paused) {
        birthdaySong.play();
        playBtn.textContent = 'ğŸ‚ æ­£åœ¨ä¸ºä½ æ­Œå”±...';
        record.classList.add('playing');
      } else {
        birthdaySong.pause();
        playBtn.textContent = 'ğŸµ ç‚¹æˆ‘å¬ä½ çš„ç”Ÿæ—¥æ­Œ';
        record.classList.remove('playing');
        resumeBgMusic();
      }
    });

    birthdaySong.addEventListener('ended', () => {
      playBtn.textContent = 'ğŸµ å†å¬ä¸€éï¼Ÿ';
      document.getElementById('record').classList.remove('playing');
      resumeBgMusic();
    });

    function resumeBgMusic() {
      if (!bgMusicStarted) return;
      bgMusic.currentTime = 0;
      bgMusic.volume = 0;
      bgMusic.play().then(() => {
        fadeVolume(bgMusic, 0, 0.3, 2000);
      });
    }

    // ========== é¡µé¢è¿›åº¦æŒ‡ç¤ºå™¨ ==========
    const totalPages = document.querySelectorAll('.page').length;
    const dotsContainer = document.getElementById('progress-dots');

    for (let i = 0; i < totalPages; i++) {
      const dot = document.createElement('div');
      dot.className = 'dot';
      dot.dataset.index = i;
      dot.addEventListener('click', () => {
        slider.scrollTo({ top: i * window.innerHeight, behavior: 'smooth' });
      });
      dotsContainer.appendChild(dot);
    }

    const pageDots = document.querySelectorAll('.dot');
    pageDots[0].classList.add('active');

    let ticking = false;
    slider.addEventListener('scroll', () => {
      if (!ticking) {
        requestAnimationFrame(() => {
          const currentPage = Math.round(slider.scrollTop / window.innerHeight);
          pageDots.forEach((dot, index) => {
            dot.classList.toggle('active', index === currentPage);
          });
          ticking = false;
        });
        ticking = true;
      }
    });

    // ========== æ—¥è®°ç”»å»Š ==========
    const galleryTrack = document.getElementById('galleryTrack');
    const galleryImgs = galleryTrack.querySelectorAll('.gallery-img');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const galleryDotsContainer = document.getElementById('galleryDots');

    let currentIndex = 0;
    const total = galleryImgs.length;

    if (total > 0) {
      galleryImgs[0].classList.add('active');
    }

    for (let i = 0; i < total; i++) {
      const dot = document.createElement('div');
      dot.className = 'gallery-dot';
      if (i === 0) dot.classList.add('active');
      dot.dataset.index = i;
      dot.addEventListener('click', () => goToSlide(i));
      galleryDotsContainer.appendChild(dot);
    }

    const dots = galleryDotsContainer.querySelectorAll('.gallery-dot');

    function goToSlide(index) {
      if (total === 0) return;
      if (index < 0) index = total - 1;
      if (index >= total) index = 0;

      galleryImgs[currentIndex].classList.remove('active');
      dots[currentIndex].classList.remove('active');

      currentIndex = index;
      galleryImgs[currentIndex].classList.add('active');
      dots[currentIndex].classList.add('active');
    }

    prevBtn.addEventListener('click', () => goToSlide(currentIndex - 1));
    nextBtn.addEventListener('click', () => goToSlide(currentIndex + 1));

    let startX = 0;
    galleryTrack.addEventListener('touchstart', (e) => {
      startX = e.touches[0].clientX;
    });
    galleryTrack.addEventListener('touchend', (e) => {
      const endX = e.changedTouches[0].clientX;
      const diff = startX - endX;
      if (Math.abs(diff) > 50) {
        if (diff > 0) {
          goToSlide(currentIndex + 1);
        } else {
          goToSlide(currentIndex - 1);
        }
      }
    });

    // ========== é”®ç›˜ç¿»é¡µ ==========
    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowDown') slider.scrollTop += window.innerHeight;
      else if (e.key === 'ArrowUp') slider.scrollTop -= window.innerHeight;
    });
  </script>
</body>
</html>